(function(){var a=false;var b=function(){this.config={defaultWidth:560,defaultHeight:315,playerFrameBorder:0,allowFullScreen:true};this.config=this.mergeObjects(this.config,window["_hoa_config"]||{});this.bindOnload(this.onDomLoaded.bind(this))};b.prototype.onDomLoaded=function(a){var b=document.getElementsByClassName("onair"),c;for(c=0;c<b.length;c++){if(b[c].getAttribute("data-uid")){var d=b[c].getAttribute("data-uid");var e=b[c].getAttribute("data-width")||this.config.defaultWidth;var f=b[c].getAttribute("data-height")||this.config.defaultHeight;this.loadVideoPlayer(b[c],d,e,f)}}};b.prototype.loadVideoPlayer=function(a,b,c,d){this.fetchUserFeed(b,0,function(e,f){var f=f.feed.entry;if(f){for(var g=0;g<f.length;g++){if(f[g]["yt$status"]["$t"]=="active"){var h=f[g]}}if(h&&h.content){var i=h.content.src.split("/");var j=document.createElement("iframe");j.src="http://www.youtube.com/embed/"+i[i.length-1].split("?")[0];j.width=c;j.height=d;j.setAttribute("frameborder",this.config.playerFrameBorder);j.setAttribute("allowfullscreen",this.config.allowFullScreen);a.parentNode.replaceChild(j,a)}}else{this.fetchUserFeed(b,1,function(b,e){var f=e.feed.entry;if(f){console.log(f[0].id["$t"]);var g=f[0].id["$t"].split("/");var h=document.createElement("iframe");h.src="http://www.youtube.com/embed/"+g[5];h.width=c;h.height=d;h.setAttribute("frameborder",this.config.playerFrameBorder);h.setAttribute("allowfullscreen",this.config.allowFullScreen);a.parentNode.replaceChild(h,a)}}.bind(this))}}.bind(this))};b.prototype.fetchUserFeed=function(a,b,c){var d="__YTLiveStreams_"+a+"_"+Math.floor(Math.random()*1000001);this.awaitLoadResonse(d,c);if(b==0){var e="https://gdata.youtube.com/feeds/api/users/"+a+"/live/events?v=2&alt=json&status=active&callback="+d}if(b==1){var e="http://gdata.youtube.com/feeds/users/"+a+"/uploads?alt=json&max-results=1&callback="+d}var f=document.createElement("script");f.type="text/javascript";f.async=true;f.src=e;var g=document.getElementsByTagName("script")[0];g.parentNode.insertBefore(f,g)};b.prototype.awaitLoadResonse=function(a,b){window[a]=function(a){b(null,a)}};b.prototype.bindOnload=function(b){if(a==true){b()}if(document.addEventListener){document.addEventListener("DOMContentLoaded",function(){b();a=true},false);return}if(document.attachEvent){document.attachEvent("onreadystatechange",function(){if(document.readyState==="complete"){b();a=true}});return}window.onload=b};b.prototype.mergeObjects=function(){var a={},b,c;for(b=0;b<arguments.length;b++){for(c in arguments[b]){a[c]=arguments[b][c]}}return a};window["_hoa_instance_"]=new b})()